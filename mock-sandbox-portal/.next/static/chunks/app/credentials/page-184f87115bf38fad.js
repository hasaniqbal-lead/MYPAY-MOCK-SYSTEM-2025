(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[921],{3067:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7216:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},9670:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6472:function(e,t,r){Promise.resolve().then(r.bind(r,54))},54:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var a=r(7437),s=r(2265),n=r(8222),i=r(4913),o=r(575),c=r(5671),l=r(3277),d=r(3067),u=r(2898);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,u.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var f=r(7216),x=r(9670);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,u.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var p=r(4033);function g(){var e;let[t,r]=(0,s.useState)(null),[u,g]=(0,s.useState)(!0),[y,v]=(0,s.useState)(!1),[b,j]=(0,s.useState)(!1),N=(0,p.useRouter)();(0,s.useEffect)(()=>{w()},[]);let w=async()=>{try{let e=await n.as.getCredentials();r(e)}catch(e){console.error("Failed to load credentials:",e)}finally{g(!1)}},k=async()=>{try{await n.as.generateApiKey(),await w()}catch(e){console.error("Failed to generate new key:",e),alert("Failed to generate new key. Please try again.")}},C=e=>{navigator.clipboard.writeText(e),j(!0),setTimeout(()=>j(!1),2e3)};return(0,a.jsx)(i.Z,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(o.z,{variant:"ghost",size:"sm",onClick:()=>N.back(),className:"gap-2",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4"}),"Back"]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-foreground",children:"API Keys"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage your API keys for secure integration"})]}),(0,a.jsxs)(o.z,{className:"gap-2 bg-mypay-green hover:bg-mypay-green-dark",onClick:k,children:[(0,a.jsx)(m,{className:"h-4 w-4"}),"Create New Key"]})]}),u?(0,a.jsx)("div",{className:"flex justify-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-mypay-green"})}):t?(0,a.jsxs)(c.Zb,{className:"shadow-elevation",children:[(0,a.jsxs)(c.Ol,{className:"flex flex-row items-center justify-between",children:[(0,a.jsx)(c.ll,{className:"text-foreground",children:"Your API Keys"}),(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>v(!y),className:"gap-2",children:[y?(0,a.jsx)(f.Z,{className:"h-4 w-4"}):(0,a.jsx)(x.Z,{className:"h-4 w-4"}),y?"Hide":"Show"," Keys"]})]}),(0,a.jsx)(c.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"space-y-1 flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium text-foreground",children:"Production API Key"}),(0,a.jsx)(l.C,{variant:"default",className:"bg-mypay-green text-white",children:"Active"})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Created: ",new Date().toLocaleDateString()]}),(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground mb-1",children:"API Key:"}),(0,a.jsx)("div",{className:"font-mono text-sm bg-muted p-2 rounded text-foreground",children:y?t.apiKey||"N/A":"••••••••••••••••••••••••••••••••"})]}),(0,a.jsxs)(o.z,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>C(t.apiKey||""),children:[(0,a.jsx)(h,{className:"h-4 w-4"}),"Copy"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"space-y-1 flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium text-foreground",children:"Test API Key"}),(0,a.jsx)(l.C,{variant:"default",className:"bg-mypay-green text-white",children:"Active"})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Created: ",new Date().toLocaleDateString()]}),(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground mb-1",children:"API Secret:"}),(0,a.jsx)("div",{className:"font-mono text-sm bg-muted p-2 rounded text-foreground",children:y?t.apiSecret||"N/A":(e=t.apiSecret||"")?e.length>8?"".concat(e.substring(0,4)).concat("•".repeat(e.length-8)).concat(e.substring(e.length-4)):e:""})]}),(0,a.jsxs)(o.z,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>C(t.apiSecret||""),children:[(0,a.jsx)(h,{className:"h-4 w-4"}),"Copy"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"space-y-1 flex-1",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Vendor ID:"}),(0,a.jsx)("div",{className:"font-mono text-sm bg-muted p-2 rounded text-foreground",children:t.vendorId||"N/A"})]}),(0,a.jsxs)(o.z,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>C(t.vendorId||""),children:[(0,a.jsx)(h,{className:"h-4 w-4"}),"Copy"]})]})]})})]}):(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No credentials found"})]})})}},4913:function(e,t,r){"use strict";r.d(t,{Z:function(){return x}});var a=r(7437),s=r(3779),n=r(4033),i=r(1396),o=r.n(i),c=r(2265),l=r(7480),d=r(4196),u=r(9036),m=r(9409),f=r(3277);function x(e){var t;let{children:r}=e,{user:i,logout:x}=(0,s.useAuth)(),h=(0,n.useRouter)(),p=(0,n.usePathname)(),[g,y]=(0,c.useState)(!1),v=async()=>{await x(),h.push("/login")},b={Home:(0,a.jsx)(l.Z,{className:"h-4 w-4 flex-shrink-0"}),ArrowUpDown:(0,a.jsx)(d.Z,{className:"h-4 w-4 flex-shrink-0"}),Shield:(0,a.jsx)(u.Z,{className:"h-4 w-4 flex-shrink-0"}),Settings:(0,a.jsx)(m.Z,{className:"h-4 w-4 flex-shrink-0"})},j=e=>p===e;return(0,a.jsxs)("div",{className:"min-h-screen flex w-full bg-background",children:[(0,a.jsx)("aside",{className:"w-64 bg-card border-r border-border flex-shrink-0",children:(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsx)("div",{className:"p-4 md:p-6 border-b border-border",children:(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("img",{src:"/lovable-uploads/12cfc784-5cca-41b2-968b-2ab31add4c8d.png",alt:"MyPay Logo",className:"h-14 w-auto flex-shrink-0"})})}),(0,a.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-1",children:(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Main"}),[{name:"Dashboard",href:"/dashboard",icon:"Home"},{name:"Transactions",href:"/transactions",icon:"ArrowUpDown"},{name:"Credentials",href:"/credentials",icon:"Shield"},{name:"Settings",href:"/settings",icon:"Settings"}].map(e=>{let t=j(e.href);return(0,a.jsxs)(o(),{href:e.href,className:"\n                      flex items-center px-4 py-3 rounded-lg text-sm font-medium transition-colors\n                      ".concat(t?"bg-mypay-green/10 text-mypay-green font-medium border-r-2 border-mypay-green":"text-muted-foreground hover:text-foreground hover:bg-accent/50","\n                    "),children:[(0,a.jsx)("span",{className:"mr-3",children:b[e.icon]}),e.name]},e.name)})]})})]})}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsxs)("header",{className:"h-16 bg-card border-b border-border flex items-center justify-between px-4 md:px-6",children:[(0,a.jsx)("div",{className:"flex items-center gap-2 md:gap-4",children:(0,a.jsx)(f.C,{variant:"secondary",className:"text-xs bg-mypay-green/10 text-mypay-green",children:"Sandbox Mode"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2 md:gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-mypay-green rounded-full flex items-center justify-center text-white font-semibold text-sm",children:(null==i?void 0:null===(t=i.companyName)||void 0===t?void 0:t.charAt(0).toUpperCase())||"U"}),(0,a.jsxs)("div",{className:"text-sm hidden md:block",children:[(0,a.jsx)("div",{className:"font-medium text-foreground",children:null==i?void 0:i.companyName}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Merchant ID: ",null==i?void 0:i.id]})]})]}),(0,a.jsx)("button",{onClick:v,className:"px-4 py-2 bg-mypay-green hover:bg-mypay-green-dark text-white text-sm font-medium rounded-lg transition-colors",children:"Logout"})]})]}),(0,a.jsx)("main",{className:"flex-1 p-4 md:p-6 overflow-auto bg-background",children:r})]})]})}},3277:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var a=r(7437);r(2265);var s=r(6061),n=r(2169);let i=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:r}),t),...s})}},575:function(e,t,r){"use strict";r.d(t,{z:function(){return l}});var a=r(7437),s=r(2265),n=r(7256),i=r(6061),o=r(2169);let c=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:l=!1,...d}=e,u=l?n.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(c({variant:s,size:i,className:r})),ref:t,...d})});l.displayName="Button"},5671:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return l},Zb:function(){return i},aY:function(){return d},ll:function(){return c}});var a=r(7437),s=r(2265),n=r(2169);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});c.displayName="CardTitle";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});l.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},3779:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return c},useAuth:function(){return l}});var a=r(7437),s=r(2265),n=r(1490),i=r(8222);let o=(0,s.createContext)(void 0);function c(e){let{children:t}=e,[r,c]=(0,s.useState)(null),[l,d]=(0,s.useState)(!0);(0,s.useEffect)(()=>{n.Z.get("auth_token")?u():d(!1)},[]);let u=async()=>{try{let e=await i.as.getProfile();c(e.merchant),d(!1)}catch(e){n.Z.remove("auth_token"),c(null),d(!1)}},m=async(e,t)=>{try{let r=await i.kv.login(e,t);if(r.success&&r.token)n.Z.set("auth_token",r.token,{expires:7}),c(r.merchant);else throw Error(r.error||"Login failed")}catch(e){throw console.error("Login error in AuthContext:",e),e}},f=async()=>{await i.kv.logout(),c(null)},x=async e=>await i.kv.register(e);return(0,a.jsx)(o.Provider,{value:{user:r,isAuthenticated:!!r,isLoading:l,login:m,logout:f,register:x},children:t})}function l(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8222:function(e,t,r){"use strict";r.d(t,{L2:function(){return c},as:function(){return o},kv:function(){return i},vD:function(){return l}});var a=r(4829),s=r(1490);let n=a.Z.create({baseURL:"https://sandbox.mycodigital.io",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=s.Z.get("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),n.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(s.Z.remove("auth_token"),window.location.href="/login"),Promise.reject(e)});let i={login:async(e,t)=>(await n.post("/api/portal/auth/login",{email:e,password:t})).data,register:async e=>(await n.post("/api/portal/auth/register",e)).data,logout:async()=>{await n.post("/api/portal/auth/logout"),s.Z.remove("auth_token")}},o={getProfile:async()=>(await n.get("/api/portal/merchant/profile")).data,updateProfile:async e=>(await n.put("/api/portal/merchant/profile",e)).data,getCredentials:async()=>(await n.get("/api/portal/merchant/credentials")).data,generateApiKey:async()=>(await n.post("/api/portal/merchant/credentials")).data},c={list:async e=>(await n.get("/api/portal/transactions",{params:e})).data,get:async e=>(await n.get("/api/portal/transactions/".concat(e))).data,export:async(e,t)=>(await n.get("/api/portal/transactions/export/".concat(e),{params:t,responseType:"blob"})).data},l={getStats:async()=>(await n.get("/api/portal/dashboard/stats")).data}},2169:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(7042),s=r(4769);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}}},function(e){e.O(0,[694,413,502,971,458,744],function(){return e(e.s=6472)}),_N_E=e.O()}]);