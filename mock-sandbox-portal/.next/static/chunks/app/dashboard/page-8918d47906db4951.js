(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{1738:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},6513:function(e,t,s){Promise.resolve().then(s.bind(s,7595))},7595:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return C}});var a=s(7437),r=s(2265),n=s(3779),i=s(8222),c=s(5671),l=s(3277),o=s(2898);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,o.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),u=(0,o.Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);function x(e){let{title:t,value:s,change:r,changeType:n,icon:i}=e;return(0,a.jsxs)(c.Zb,{className:"shadow-elevation",children:[(0,a.jsxs)(c.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(c.ll,{className:"text-sm font-medium text-muted-foreground",children:t}),(0,a.jsx)("div",{className:"text-mypay-green",children:i})]}),(0,a.jsxs)(c.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-foreground mb-1",children:s}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["increase"===n?(0,a.jsx)(d,{className:"h-3 w-3 text-status-success"}):(0,a.jsx)(u,{className:"h-3 w-3 text-status-error"}),(0,a.jsxs)(l.C,{variant:"secondary",className:"text-xs ".concat("increase"===n?"bg-status-success/10 text-status-success":"bg-status-error/10 text-status-error"),children:[r>0?"+":"",r,"%"]}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground ml-1",children:"vs last month"})]})]})]})}var m=s(575),f=s(9670),h=s(4033),g=s(7918);let p=e=>{switch(e.toLowerCase()){case"success":case"completed":return(0,a.jsx)(l.C,{className:"bg-status-success/10 text-status-success",children:"Success"});case"pending":return(0,a.jsx)(l.C,{className:"bg-status-pending/10 text-status-pending",children:"Pending"});case"failed":case"error":return(0,a.jsx)(l.C,{className:"bg-status-error/10 text-status-error",children:"Failed"});default:return(0,a.jsx)(l.C,{variant:"secondary",children:e})}};function v(e){let{transactions:t}=e,s=(0,h.useRouter)(),r=t.slice(0,5);return(0,a.jsxs)(c.Zb,{className:"shadow-elevation",children:[(0,a.jsxs)(c.Ol,{className:"flex flex-row items-center justify-between",children:[(0,a.jsx)(c.ll,{children:"Recent Transactions"}),(0,a.jsx)(m.z,{variant:"ghost",size:"sm",onClick:()=>s.push("/transactions"),children:"View All"})]}),(0,a.jsx)(c.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:r.length>0?r.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border border-border hover:bg-accent/50 transition-colors",children:[(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium text-sm font-mono",children:e.checkout_id}),p(e.status)]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:[e.reference," â€¢ ",e.payment_method||e.paymentMethod||"N/A"]})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"font-semibold",children:["PKR ",e.amount.toLocaleString()]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:(0,g.WU)(new Date(e.created_at||e.createdAt||new Date),"MMM dd, HH:mm")})]}),(0,a.jsx)(m.z,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,a.jsx)(f.Z,{className:"h-4 w-4"})})]})]},e.checkout_id)):(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No transactions found"})})})]})}var y=s(4913),j=s(9069);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let b=(0,o.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),N=(0,o.Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var w=s(1738);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let k=(0,o.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);function C(){let{user:e,isAuthenticated:t}=(0,n.useAuth)(),[s,l]=(0,r.useState)(null),[o,u]=(0,r.useState)([]),[m,f]=(0,r.useState)(!0);(0,r.useEffect)(()=>{t&&h()},[t]);let h=async()=>{try{let[e,t]=await Promise.all([i.vD.getStats(),i.L2.list({limit:5})]);l(e.stats),u(t.transactions||[])}catch(e){console.error("Failed to load dashboard data:",e)}finally{f(!1)}};return t?(0,a.jsx)(y.Z,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-foreground",children:["Welcome back, ",(null==e?void 0:e.companyName)||"User"]}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Here's what's happening with your MyPay merchant account today."})]})}),(0,a.jsxs)(j.bZ,{className:"border-status-warning/20 bg-status-warning/5",children:[(0,a.jsx)(b,{className:"h-4 w-4 text-status-warning"}),(0,a.jsx)(j.X,{className:"text-status-warning",children:"Complete your business verification to start accepting live payments in Pakistan."})]}),m?(0,a.jsx)("div",{className:"flex justify-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-mypay-green"})}):s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)(x,{title:"Total Revenue",value:"PKR ".concat(s.totalAmount.toLocaleString()),change:12.5,changeType:"increase",icon:(0,a.jsx)(N,{className:"h-4 w-4"})}),(0,a.jsx)(x,{title:"Total Transactions",value:s.totalTransactions.toString(),change:8.2,changeType:"increase",icon:(0,a.jsx)(w.Z,{className:"h-4 w-4"})}),(0,a.jsx)(x,{title:"Success Rate",value:"".concat(s.successRate.toFixed(1),"%"),change:2.1,changeType:"increase",icon:(0,a.jsx)(d,{className:"h-4 w-4"})}),(0,a.jsx)(x,{title:"Active Customers",value:"892",change:-1.2,changeType:"decrease",icon:(0,a.jsx)(k,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-2 space-y-6",children:(0,a.jsx)(v,{transactions:o})}),(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(c.Zb,{className:"shadow-elevation",children:[(0,a.jsx)(c.Ol,{children:(0,a.jsx)(c.ll,{children:"System Status"})}),(0,a.jsxs)(c.aY,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-foreground",children:"API Status"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-status-success rounded-full"}),(0,a.jsx)("span",{className:"text-sm text-status-success",children:"Operational"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-foreground",children:"Payment Gateway"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-status-success rounded-full"}),(0,a.jsx)("span",{className:"text-sm text-status-success",children:"Operational"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-foreground",children:"Webhook Delivery"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-status-warning rounded-full"}),(0,a.jsx)("span",{className:"text-sm text-status-warning",children:"Degraded"})]})]})]})]})})]})]}):(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No data available"})]})}):null}},4913:function(e,t,s){"use strict";s.d(t,{Z:function(){return f}});var a=s(7437),r=s(3779),n=s(4033),i=s(1396),c=s.n(i),l=s(2265),o=s(7480),d=s(4196),u=s(9036),x=s(9409),m=s(3277);function f(e){var t;let{children:s}=e,{user:i,logout:f}=(0,r.useAuth)(),h=(0,n.useRouter)(),g=(0,n.usePathname)(),[p,v]=(0,l.useState)(!1),y=async()=>{await f(),h.push("/login")},j={Home:(0,a.jsx)(o.Z,{className:"h-4 w-4 flex-shrink-0"}),ArrowUpDown:(0,a.jsx)(d.Z,{className:"h-4 w-4 flex-shrink-0"}),Shield:(0,a.jsx)(u.Z,{className:"h-4 w-4 flex-shrink-0"}),Settings:(0,a.jsx)(x.Z,{className:"h-4 w-4 flex-shrink-0"})},b=e=>g===e;return(0,a.jsxs)("div",{className:"min-h-screen flex w-full bg-background",children:[(0,a.jsx)("aside",{className:"w-64 bg-card border-r border-border flex-shrink-0",children:(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsx)("div",{className:"p-4 md:p-6 border-b border-border",children:(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("img",{src:"/lovable-uploads/12cfc784-5cca-41b2-968b-2ab31add4c8d.png",alt:"MyPay Logo",className:"h-14 w-auto flex-shrink-0"})})}),(0,a.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-1",children:(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Main"}),[{name:"Dashboard",href:"/dashboard",icon:"Home"},{name:"Transactions",href:"/transactions",icon:"ArrowUpDown"},{name:"Credentials",href:"/credentials",icon:"Shield"},{name:"Settings",href:"/settings",icon:"Settings"}].map(e=>{let t=b(e.href);return(0,a.jsxs)(c(),{href:e.href,className:"\n                      flex items-center px-4 py-3 rounded-lg text-sm font-medium transition-colors\n                      ".concat(t?"bg-mypay-green/10 text-mypay-green font-medium border-r-2 border-mypay-green":"text-muted-foreground hover:text-foreground hover:bg-accent/50","\n                    "),children:[(0,a.jsx)("span",{className:"mr-3",children:j[e.icon]}),e.name]},e.name)})]})})]})}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsxs)("header",{className:"h-16 bg-card border-b border-border flex items-center justify-between px-4 md:px-6",children:[(0,a.jsx)("div",{className:"flex items-center gap-2 md:gap-4",children:(0,a.jsx)(m.C,{variant:"secondary",className:"text-xs bg-mypay-green/10 text-mypay-green",children:"Sandbox Mode"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2 md:gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-mypay-green rounded-full flex items-center justify-center text-white font-semibold text-sm",children:(null==i?void 0:null===(t=i.companyName)||void 0===t?void 0:t.charAt(0).toUpperCase())||"U"}),(0,a.jsxs)("div",{className:"text-sm hidden md:block",children:[(0,a.jsx)("div",{className:"font-medium text-foreground",children:null==i?void 0:i.companyName}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Merchant ID: ",null==i?void 0:i.id]})]})]}),(0,a.jsx)("button",{onClick:y,className:"px-4 py-2 bg-mypay-green hover:bg-mypay-green-dark text-white text-sm font-medium rounded-lg transition-colors",children:"Logout"})]})]}),(0,a.jsx)("main",{className:"flex-1 p-4 md:p-6 overflow-auto bg-background",children:s})]})]})}},9069:function(e,t,s){"use strict";s.d(t,{X:function(){return o},bZ:function(){return l}});var a=s(7437),r=s(2265),n=s(6061),i=s(2169);let c=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=r.forwardRef((e,t)=>{let{className:s,variant:r,...n}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(c({variant:r}),s),...n})});l.displayName="Alert",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",s),...r})}).displayName="AlertTitle";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",s),...r})});o.displayName="AlertDescription"},3277:function(e,t,s){"use strict";s.d(t,{C:function(){return c}});var a=s(7437);s(2265);var r=s(6061),n=s(2169);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:s}),t),...r})}},575:function(e,t,s){"use strict";s.d(t,{z:function(){return o}});var a=s(7437),r=s(2265),n=s(7256),i=s(6061),c=s(2169);let l=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,t)=>{let{className:s,variant:r,size:i,asChild:o=!1,...d}=e,u=o?n.g7:"button";return(0,a.jsx)(u,{className:(0,c.cn)(l({variant:r,size:i,className:s})),ref:t,...d})});o.displayName="Button"},5671:function(e,t,s){"use strict";s.d(t,{Ol:function(){return c},SZ:function(){return o},Zb:function(){return i},aY:function(){return d},ll:function(){return l}});var a=s(7437),r=s(2265),n=s(2169);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});i.displayName="Card";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});c.displayName="CardHeader";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});l.displayName="CardTitle";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})});o.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...r})});d.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},3779:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthProvider:function(){return l},useAuth:function(){return o}});var a=s(7437),r=s(2265),n=s(1490),i=s(8222);let c=(0,r.createContext)(void 0);function l(e){let{children:t}=e,[s,l]=(0,r.useState)(null),[o,d]=(0,r.useState)(!0);(0,r.useEffect)(()=>{n.Z.get("auth_token")?u():d(!1)},[]);let u=async()=>{try{let e=await i.as.getProfile();l(e.merchant),d(!1)}catch(e){n.Z.remove("auth_token"),l(null),d(!1)}},x=async(e,t)=>{try{let s=await i.kv.login(e,t);if(s.success&&s.token)n.Z.set("auth_token",s.token,{expires:7}),l(s.merchant);else throw Error(s.error||"Login failed")}catch(e){throw console.error("Login error in AuthContext:",e),e}},m=async()=>{await i.kv.logout(),l(null)},f=async e=>await i.kv.register(e);return(0,a.jsx)(c.Provider,{value:{user:s,isAuthenticated:!!s,isLoading:o,login:x,logout:m,register:f},children:t})}function o(){let e=(0,r.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8222:function(e,t,s){"use strict";s.d(t,{L2:function(){return l},as:function(){return c},kv:function(){return i},vD:function(){return o}});var a=s(4829),r=s(1490);let n=a.Z.create({baseURL:"https://sandbox.mycodigital.io",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=r.Z.get("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),n.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(r.Z.remove("auth_token"),window.location.href="/login"),Promise.reject(e)});let i={login:async(e,t)=>(await n.post("/api/portal/auth/login",{email:e,password:t})).data,register:async e=>(await n.post("/api/portal/auth/register",e)).data,logout:async()=>{await n.post("/api/portal/auth/logout"),r.Z.remove("auth_token")}},c={getProfile:async()=>(await n.get("/api/portal/merchant/profile")).data,updateProfile:async e=>(await n.put("/api/portal/merchant/profile",e)).data,getCredentials:async()=>(await n.get("/api/portal/merchant/credentials")).data,generateApiKey:async()=>(await n.post("/api/portal/merchant/credentials")).data},l={list:async e=>(await n.get("/api/portal/transactions",{params:e})).data,get:async e=>(await n.get("/api/portal/transactions/".concat(e))).data,export:async(e,t)=>(await n.get("/api/portal/transactions/export/".concat(e),{params:t,responseType:"blob"})).data},o={getStats:async()=>(await n.get("/api/portal/dashboard/stats")).data}},2169:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var a=s(7042),r=s(4769);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}}},function(e){e.O(0,[694,413,502,150,971,458,744],function(){return e(e.s=6513)}),_N_E=e.O()}]);