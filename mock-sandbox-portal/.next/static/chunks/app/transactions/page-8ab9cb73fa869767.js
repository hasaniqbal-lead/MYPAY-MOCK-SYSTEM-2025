(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[220],{1283:function(e,s,a){Promise.resolve().then(a.bind(a,7525))},7525:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return _}});var l=a(7437),t=a(2265),r=a(8222),n=a(4913),c=a(5671),d=a(575),i=a(2782),o=a(3277),h=a(8641),x=a(2169);let u=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("div",{className:"relative w-full overflow-auto",children:(0,l.jsx)("table",{ref:s,className:(0,x.cn)("w-full caption-bottom text-sm",a),...t})})});u.displayName="Table";let m=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("thead",{ref:s,className:(0,x.cn)("[&_tr]:border-b",a),...t})});m.displayName="TableHeader";let j=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("tbody",{ref:s,className:(0,x.cn)("[&_tr:last-child]:border-0",a),...t})});j.displayName="TableBody";let f=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("tr",{ref:s,className:(0,x.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...t})});f.displayName="TableRow";let p=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("th",{ref:s,className:(0,x.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...t})});p.displayName="TableHead";let y=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("td",{ref:s,className:(0,x.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...t})});y.displayName="TableCell";var N=a(2898);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let v=(0,N.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),w=(0,N.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),g=(0,N.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),b=(0,N.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var C=a(9670),k=a(7918);let L=e=>{switch(e.toLowerCase()){case"success":case"completed":return(0,l.jsx)(o.C,{className:"bg-status-success/10 text-status-success",children:"Success"});case"pending":return(0,l.jsx)(o.C,{className:"bg-status-pending/10 text-status-pending",children:"Pending"});case"failed":case"error":return(0,l.jsx)(o.C,{className:"bg-status-error/10 text-status-error",children:"Failed"});default:return(0,l.jsx)(o.C,{variant:"secondary",children:e})}};function _(){let[e,s]=(0,t.useState)([]),[a,x]=(0,t.useState)(!0),[N,_]=(0,t.useState)(""),[M,R]=(0,t.useState)("all"),[S,z]=(0,t.useState)("all");(0,t.useEffect)(()=>{E()},[M,S]);let E=async()=>{try{let e={};"all"!==M&&(e.status=M);let a=(await r.L2.list(e)).transactions||[];"all"!==S&&(a=a.filter(e=>(e.payment_method||e.paymentMethod||"").toLowerCase()===S.toLowerCase())),N&&(a=a.filter(e=>e.checkout_id.toLowerCase().includes(N.toLowerCase())||e.reference.toLowerCase().includes(N.toLowerCase())||(e.customer_email||"").toLowerCase().includes(N.toLowerCase()))),s(a)}catch(e){console.error("Failed to load transactions:",e)}finally{x(!1)}},Q=async e=>{try{let s={};"all"!==M&&(s.status=M);let a=await r.L2.export(e,s),l=window.URL.createObjectURL(a),t=document.createElement("a");t.href=l,t.download="transactions.".concat(e),document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(l),document.body.removeChild(t)}catch(e){console.error("Export failed:",e),alert("Export failed. Please try again.")}};return(0,l.jsx)(n.Z,{children:(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Transactions"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"Monitor and manage all your payment transactions"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)(d.z,{variant:"outline",size:"sm",onClick:()=>Q("csv"),children:[(0,l.jsx)(v,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,l.jsxs)(d.z,{variant:"outline",size:"sm",onClick:E,children:[(0,l.jsx)(w,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),(0,l.jsxs)(c.Zb,{className:"shadow-elevation",children:[(0,l.jsx)(c.Ol,{children:(0,l.jsx)(c.ll,{children:"Filters"})}),(0,l.jsx)(c.aY,{children:(0,l.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,l.jsx)(i.I,{placeholder:"Search transactions...",value:N,onChange:e=>{_(e.target.value),E()},className:"pl-9"})]})}),(0,l.jsxs)(h.Ph,{value:M,onValueChange:R,children:[(0,l.jsx)(h.i4,{className:"w-[150px]",children:(0,l.jsx)(h.ki,{placeholder:"Status"})}),(0,l.jsxs)(h.Bw,{children:[(0,l.jsx)(h.Ql,{value:"all",children:"All Status"}),(0,l.jsx)(h.Ql,{value:"success",children:"Success"}),(0,l.jsx)(h.Ql,{value:"completed",children:"Completed"}),(0,l.jsx)(h.Ql,{value:"pending",children:"Pending"}),(0,l.jsx)(h.Ql,{value:"failed",children:"Failed"})]})]}),(0,l.jsxs)(h.Ph,{value:S,onValueChange:z,children:[(0,l.jsx)(h.i4,{className:"w-[150px]",children:(0,l.jsx)(h.ki,{placeholder:"Method"})}),(0,l.jsxs)(h.Bw,{children:[(0,l.jsx)(h.Ql,{value:"all",children:"All Methods"}),(0,l.jsx)(h.Ql,{value:"card",children:"Card"}),(0,l.jsx)(h.Ql,{value:"easypaisa",children:"Easypaisa"}),(0,l.jsx)(h.Ql,{value:"jazzcash",children:"JazzCash"}),(0,l.jsx)(h.Ql,{value:"e-billing",children:"E-billing"})]})]}),(0,l.jsxs)(d.z,{variant:"outline",children:[(0,l.jsx)(b,{className:"h-4 w-4 mr-2"}),"More Filters"]})]})})]}),(0,l.jsxs)(c.Zb,{className:"shadow-elevation",children:[(0,l.jsx)(c.Ol,{children:(0,l.jsx)(c.ll,{children:"Transaction History"})}),(0,l.jsx)(c.aY,{children:a?(0,l.jsx)("div",{className:"flex justify-center py-12",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-mypay-green"})}):(0,l.jsxs)(u,{children:[(0,l.jsx)(m,{children:(0,l.jsxs)(f,{children:[(0,l.jsx)(p,{className:"text-foreground",children:"Transaction ID"}),(0,l.jsx)(p,{className:"text-foreground",children:"Customer"}),(0,l.jsx)(p,{className:"text-foreground",children:"Amount"}),(0,l.jsx)(p,{className:"text-foreground",children:"Method"}),(0,l.jsx)(p,{className:"text-foreground",children:"Status"}),(0,l.jsx)(p,{className:"text-foreground",children:"Timestamp"}),(0,l.jsx)(p,{className:"text-foreground",children:"Actions"})]})}),(0,l.jsx)(j,{children:e.length>0?e.map(e=>(0,l.jsxs)(f,{children:[(0,l.jsx)(y,{className:"font-mono text-sm text-foreground",children:e.checkout_id}),(0,l.jsx)(y,{className:"text-foreground",children:e.customer_email||e.reference||"N/A"}),(0,l.jsxs)(y,{className:"font-semibold text-foreground",children:["PKR ",e.amount.toLocaleString()]}),(0,l.jsx)(y,{children:(0,l.jsx)(o.C,{variant:"outline",children:e.payment_method||e.paymentMethod||"N/A"})}),(0,l.jsx)(y,{children:L(e.status)}),(0,l.jsx)(y,{className:"text-muted-foreground text-sm",children:(0,k.WU)(new Date(e.created_at||e.createdAt||new Date),"yyyy-MM-dd HH:mm:ss")}),(0,l.jsx)(y,{children:(0,l.jsx)(d.z,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,l.jsx)(C.Z,{className:"h-4 w-4"})})})]},e.checkout_id)):(0,l.jsx)(f,{children:(0,l.jsx)(y,{colSpan:7,className:"text-center py-12 text-muted-foreground",children:"No transactions found"})})})]})})]})]})})}}},function(e){e.O(0,[694,413,502,816,150,189,971,458,744],function(){return e(e.s=1283)}),_N_E=e.O()}]);