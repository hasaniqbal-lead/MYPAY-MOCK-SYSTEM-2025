"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{4913:function(e,r,t){t.d(r,{Z:function(){return p}});var n=t(7437),a=t(3779),s=t(4033),o=t(1396),i=t.n(o),d=t(2265),l=t(7480),c=t(4196),u=t(9036),f=t(9409),m=t(3277);function p(e){var r;let{children:t}=e,{user:o,logout:p}=(0,a.useAuth)(),x=(0,s.useRouter)(),g=(0,s.usePathname)(),[h,b]=(0,d.useState)(!1),v=async()=>{await p(),x.push("/login")},y={Home:(0,n.jsx)(l.Z,{className:"h-4 w-4 flex-shrink-0"}),ArrowUpDown:(0,n.jsx)(c.Z,{className:"h-4 w-4 flex-shrink-0"}),Shield:(0,n.jsx)(u.Z,{className:"h-4 w-4 flex-shrink-0"}),Settings:(0,n.jsx)(f.Z,{className:"h-4 w-4 flex-shrink-0"})},w=e=>g===e;return(0,n.jsxs)("div",{className:"min-h-screen flex w-full bg-background",children:[(0,n.jsx)("aside",{className:"w-64 bg-card border-r border-border flex-shrink-0",children:(0,n.jsxs)("div",{className:"h-full flex flex-col",children:[(0,n.jsx)("div",{className:"p-4 md:p-6 border-b border-border",children:(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)("img",{src:"/lovable-uploads/12cfc784-5cca-41b2-968b-2ab31add4c8d.png",alt:"MyPay Logo",className:"h-14 w-auto flex-shrink-0"})})}),(0,n.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-1",children:(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Main"}),[{name:"Dashboard",href:"/dashboard",icon:"Home"},{name:"Transactions",href:"/transactions",icon:"ArrowUpDown"},{name:"Credentials",href:"/credentials",icon:"Shield"},{name:"Settings",href:"/settings",icon:"Settings"}].map(e=>{let r=w(e.href);return(0,n.jsxs)(i(),{href:e.href,className:"\n                      flex items-center px-4 py-3 rounded-lg text-sm font-medium transition-colors\n                      ".concat(r?"bg-mypay-green/10 text-mypay-green font-medium border-r-2 border-mypay-green":"text-muted-foreground hover:text-foreground hover:bg-accent/50","\n                    "),children:[(0,n.jsx)("span",{className:"mr-3",children:y[e.icon]}),e.name]},e.name)})]})})]})}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,n.jsxs)("header",{className:"h-16 bg-card border-b border-border flex items-center justify-between px-4 md:px-6",children:[(0,n.jsx)("div",{className:"flex items-center gap-2 md:gap-4",children:(0,n.jsx)(m.C,{variant:"secondary",className:"text-xs bg-mypay-green/10 text-mypay-green",children:"Sandbox Mode"})}),(0,n.jsxs)("div",{className:"flex items-center gap-2 md:gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"w-8 h-8 bg-mypay-green rounded-full flex items-center justify-center text-white font-semibold text-sm",children:(null==o?void 0:null===(r=o.companyName)||void 0===r?void 0:r.charAt(0).toUpperCase())||"U"}),(0,n.jsxs)("div",{className:"text-sm hidden md:block",children:[(0,n.jsx)("div",{className:"font-medium text-foreground",children:null==o?void 0:o.companyName}),(0,n.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Merchant ID: ",null==o?void 0:o.id]})]})]}),(0,n.jsx)("button",{onClick:v,className:"px-4 py-2 bg-mypay-green hover:bg-mypay-green-dark text-white text-sm font-medium rounded-lg transition-colors",children:"Logout"})]})]}),(0,n.jsx)("main",{className:"flex-1 p-4 md:p-6 overflow-auto bg-background",children:t})]})]})}},3277:function(e,r,t){t.d(r,{C:function(){return i}});var n=t(7437);t(2265);var a=t(6061),s=t(2169);let o=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:r,variant:t,...a}=e;return(0,n.jsx)("div",{className:(0,s.cn)(o({variant:t}),r),...a})}},575:function(e,r,t){t.d(r,{z:function(){return l}});var n=t(7437),a=t(2265),s=t(7256),o=t(6061),i=t(2169);let d=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,r)=>{let{className:t,variant:a,size:o,asChild:l=!1,...c}=e,u=l?s.g7:"button";return(0,n.jsx)(u,{className:(0,i.cn)(d({variant:a,size:o,className:t})),ref:r,...c})});l.displayName="Button"},5671:function(e,r,t){t.d(r,{Ol:function(){return i},SZ:function(){return l},Zb:function(){return o},aY:function(){return c},ll:function(){return d}});var n=t(7437),a=t(2265),s=t(2169);let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});o.displayName="Card";let i=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...a})});i.displayName="CardHeader";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("h3",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});d.displayName="CardTitle";let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",t),...a})});l.displayName="CardDescription";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",t),...a})});c.displayName="CardContent",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},2782:function(e,r,t){t.d(r,{I:function(){return o}});var n=t(7437),a=t(2265),s=t(2169);let o=a.forwardRef((e,r)=>{let{className:t,type:a,...o}=e;return(0,n.jsx)("input",{type:a,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...o})});o.displayName="Input"},8641:function(e,r,t){t.d(r,{Bw:function(){return f},Ph:function(){return l},Ql:function(){return m},i4:function(){return u},ki:function(){return c}});var n=t(7437),a=t(2265),s=t(1083),o=t(3523),i=t(2442),d=t(2169);let l=s.fC,c=s.B4,u=a.forwardRef((e,r)=>{let{className:t,children:a,...i}=e;return(0,n.jsxs)(s.xz,{ref:r,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...i,children:[a,(0,n.jsx)(s.JO,{asChild:!0,children:(0,n.jsx)(o.Z,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=s.xz.displayName;let f=a.forwardRef((e,r)=>{let{className:t,children:a,position:o="popper",...i}=e;return(0,n.jsx)(s.h_,{children:(0,n.jsx)(s.VY,{ref:r,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md",t),position:o,...i,children:(0,n.jsx)(s.l_,{className:"p-1",children:a})})})});f.displayName=s.VY.displayName;let m=a.forwardRef((e,r)=>{let{className:t,children:a,...o}=e;return(0,n.jsxs)(s.ck,{ref:r,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...o,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(s.wU,{children:(0,n.jsx)(i.Z,{className:"h-4 w-4"})})}),(0,n.jsx)(s.eT,{children:a})]})});m.displayName=s.ck.displayName},3779:function(e,r,t){t.r(r),t.d(r,{AuthProvider:function(){return d},useAuth:function(){return l}});var n=t(7437),a=t(2265),s=t(1490),o=t(8222);let i=(0,a.createContext)(void 0);function d(e){let{children:r}=e,[t,d]=(0,a.useState)(null),[l,c]=(0,a.useState)(!0);(0,a.useEffect)(()=>{s.Z.get("auth_token")?u():c(!1)},[]);let u=async()=>{try{let e=await o.as.getProfile();d(e.merchant),c(!1)}catch(e){s.Z.remove("auth_token"),d(null),c(!1)}},f=async(e,r)=>{try{let t=await o.kv.login(e,r);if(t.success&&t.token)s.Z.set("auth_token",t.token,{expires:7}),d(t.merchant);else throw Error(t.error||"Login failed")}catch(e){throw console.error("Login error in AuthContext:",e),e}},m=async()=>{await o.kv.logout(),d(null)},p=async e=>await o.kv.register(e);return(0,n.jsx)(i.Provider,{value:{user:t,isAuthenticated:!!t,isLoading:l,login:f,logout:m,register:p},children:r})}function l(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8222:function(e,r,t){t.d(r,{L2:function(){return d},as:function(){return i},kv:function(){return o},vD:function(){return l}});var n=t(4829),a=t(1490);let s=n.Z.create({baseURL:"https://sandbox.mycodigital.io",headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{let r=a.Z.get("auth_token");return r&&(e.headers.Authorization="Bearer ".concat(r)),e}),s.interceptors.response.use(e=>e,e=>{var r;return(null===(r=e.response)||void 0===r?void 0:r.status)===401&&(a.Z.remove("auth_token"),window.location.href="/login"),Promise.reject(e)});let o={login:async(e,r)=>(await s.post("/api/portal/auth/login",{email:e,password:r})).data,register:async e=>(await s.post("/api/portal/auth/register",e)).data,logout:async()=>{await s.post("/api/portal/auth/logout"),a.Z.remove("auth_token")}},i={getProfile:async()=>(await s.get("/api/portal/merchant/profile")).data,updateProfile:async e=>(await s.put("/api/portal/merchant/profile",e)).data,getCredentials:async()=>(await s.get("/api/portal/merchant/credentials")).data,generateApiKey:async()=>(await s.post("/api/portal/merchant/credentials")).data},d={list:async e=>(await s.get("/api/portal/transactions",{params:e})).data,get:async e=>(await s.get("/api/portal/transactions/".concat(e))).data,export:async(e,r)=>(await s.get("/api/portal/transactions/export/".concat(e),{params:r,responseType:"blob"})).data},l={getStats:async()=>(await s.get("/api/portal/dashboard/stats")).data}},2169:function(e,r,t){t.d(r,{cn:function(){return s}});var n=t(7042),a=t(4769);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.m6)((0,n.W)(r))}}}]);